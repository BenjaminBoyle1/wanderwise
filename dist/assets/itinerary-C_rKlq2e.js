import{i as T}from"./include-BTc5-h4F.js";T("/partials/header.html","header");T("/partials/footer.html","footer");const y=document.getElementById("trip-select"),f=document.getElementById("grouped-itinerary"),L=document.getElementById("add-itinerary-btn"),h=document.getElementById("itinerary-date"),v=document.getElementById("itinerary-activity"),$=document.getElementById("start-time"),E=document.getElementById("end-time"),B=document.getElementById("export-btn");let s=null;function O(){const r=JSON.parse(localStorage.getItem("trips"))||[];y.innerHTML='<option value="">-- Choose a Trip --</option>',r.forEach((e,t)=>{const a=document.createElement("option");a.value=t,a.textContent=e.name,y.appendChild(a)})}function S(r){return r.reduce((e,t)=>(e[t.date]||(e[t.date]=[]),e[t.date].push(t),e),{})}async function g(r){const t=(JSON.parse(localStorage.getItem("trips"))||[])[r];if(f.innerHTML="",!t||!t.itinerary)return;t.itinerary.sort((n,i)=>new Date(`${n.date} ${n.startTime}`)-new Date(`${i.date} ${i.startTime}`));const a=S(t.itinerary),d=t.weather||{};Object.entries(a).forEach(([n,i],c)=>{const o=document.createElement("section");o.classList.add("itinerary-day-group");const l=d[n],p=l?`<small>ðŸŒ¤ ${l.description}, ${l.temp}Â°C</small>`:"";o.innerHTML=`
      <h3>ðŸ“… Day ${c+1} â€” ${w(n)} ${p}</h3>
      <ul class="itinerary-group-list"></ul>
    `;const u=o.querySelector("ul");i.forEach((m,D)=>{const I=document.createElement("li");I.innerHTML=`
        <span>${m.startTime}â€“${m.endTime} â†’ ${m.activity}</span>
        <button class="btn btn-sm danger" data-index="${D}" data-date="${n}">Remove</button>
      `,u.appendChild(I)}),f.appendChild(o)}),document.querySelectorAll("button[data-date]").forEach(n=>{n.addEventListener("click",()=>{const i=JSON.parse(localStorage.getItem("trips"))||[],c=i[s],{date:o,index:l}=n.dataset;c.itinerary=c.itinerary.filter((p,u)=>!(p.date===o&&u===parseInt(l))),localStorage.setItem("trips",JSON.stringify(i)),g(s)})})}function b(){const r=h.value,e=v.value.trim(),t=$.value,a=E.value;if(!r||!e||!t||!a||s===null)return;const d=JSON.parse(localStorage.getItem("trips"))||[],n=d[s];n.itinerary||(n.itinerary=[]),n.itinerary.push({date:r,activity:e,startTime:t,endTime:a}),localStorage.setItem("trips",JSON.stringify(d)),h.value="",v.value="",$.value="",E.value="",g(s)}function w(r){return new Date(r).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"})}function x(){const e=(JSON.parse(localStorage.getItem("trips"))||[])[s];if(!e||!e.itinerary)return;let t=`ðŸ“… Itinerary for ${e.name}

`;const a=S(e.itinerary);Object.keys(a).sort().forEach((i,c)=>{t+=`
Day ${c+1} â€” ${w(i)}
`,a[i].forEach(o=>{t+=`â€¢ ${o.startTime}â€“${o.endTime} â€” ${o.activity}
`})});const n=window.open("","_blank");n.document.write(`<pre>${t}</pre>`),n.document.title=`Itinerary - ${e.name}`}y.addEventListener("change",r=>{s=parseInt(r.target.value),g(s)});L.addEventListener("click",b);B.addEventListener("click",x);O();
