import{i as g}from"./include-BTc5-h4F.js";g("/partials/header.html","header");g("/partials/footer.html","footer");const u="23da78cc5a29fc1267bc86b249b3bd82",l=document.getElementById("weather-location"),v=document.getElementById("get-weather-btn"),M=document.getElementById("use-my-location"),i=document.getElementById("weather-results"),d=document.getElementById("suggestions"),f=document.getElementById("recent-searches");v.addEventListener("click",()=>{l.value.trim()&&p(l.value.trim())});l.addEventListener("input",async t=>{const e=t.target.value.trim();if(!e){d.innerHTML="";return}const a=await(await fetch(`https://api.openweathermap.org/data/2.5/find?q=${e}&type=like&sort=population&cnt=5&appid=${u}`)).json();d.innerHTML="",a.list.forEach(s=>{const o=document.createElement("li");o.textContent=`${s.name}, ${s.sys.country}`,o.addEventListener("click",()=>{l.value=o.textContent,d.innerHTML="",p(o.textContent)}),d.appendChild(o)})});M.addEventListener("click",()=>{navigator.geolocation.getCurrentPosition(async t=>{const{latitude:e,longitude:n}=t.coords;$(e,n)})});function C(t){let e=JSON.parse(localStorage.getItem("recentSearches"))||[];e=e.filter(n=>n!==t),e.unshift(t),e.length>5&&e.pop(),localStorage.setItem("recentSearches",JSON.stringify(e)),m()}function m(){const t=JSON.parse(localStorage.getItem("recentSearches"))||[];f.innerHTML="",t.forEach(e=>{const n=document.createElement("button");n.className="btn btn-sm",n.textContent=e,n.addEventListener("click",()=>p(e)),f.appendChild(n)})}async function p(t){C(t),i.innerHTML="Loading...";const n=await(await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${encodeURIComponent(t)}&appid=${u}&units=metric`)).json();if(n.cod!=="200"){i.innerHTML='<p class="error">⚠️ City not found</p>';return}E(n.list)}async function $(t,e){i.innerHTML="Loading...";const a=await(await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${t}&lon=${e}&appid=${u}&units=metric`)).json();if(a.cod!=="200"){i.innerHTML='<p class="error">⚠️ Could not retrieve weather</p>';return}E(a.list)}function E(t){const e=b(t).slice(0,3);i.innerHTML="",e.forEach(([n,a])=>{const s=document.createElement("div");s.className="forecast-card",s.innerHTML=`<h3>${H(n)}</h3>`;const o={Morning:null,Afternoon:null,Evening:null};a.forEach(c=>{const r=new Date(c.dt_txt).getHours();r>=6&&r<12&&!o.Morning?o.Morning=c:r>=12&&r<18&&!o.Afternoon?o.Afternoon=c:r>=18&&r<24&&!o.Evening&&(o.Evening=c)}),Object.entries(o).forEach(([c,r])=>{if(r){const h=Math.round(r.main.temp),L=Math.round(h*9/5+32),w=r.weather[0].icon,y=r.weather[0].description;s.innerHTML+=`
          <div class="sub-forecast">
            <strong>${c}</strong><br/>
            <img src="https://openweathermap.org/img/wn/${w}@2x.png" />
            <p>${L}°F / ${h}°C</p>
            <small>${y}</small>
          </div>
        `}}),i.appendChild(s)})}function b(t){const e={};return t.forEach(n=>{const a=n.dt_txt.split(" ")[0];e[a]||(e[a]=[]),e[a].push(n)}),Object.entries(e)}function H(t){return new Date(t).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}m();
